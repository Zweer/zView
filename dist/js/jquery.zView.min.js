/**
 * -----------------------------------------------------
 * zView v0.0.0 by @dotzweer
 * -----------------------------------------------------
 * Copyright 2013 Niccol√≤ Olivieri <flicofloc@gmail.com>
 */

if("undefined"==typeof jQuery)throw new Error("zView requires jQuery");!function(a){"use strict";var b=function(b,c){this.$element=a(b),this.options=c,this._initElement(),this._initEvents()};b.prototype._initElement=function(){this.$element.css({position:"static"!==this.$element.css("position")?this.$element.css("position"):"relative"}),this.$element.children().each(a.proxy(this._initChild,this)),this.$contents=this.$element.children().css({position:"absolute",width:"100%",height:"100%",zIndex:this.options.zIndex}).fadeOut(0),this.current=0,this._show()},b.prototype._initChild=function(b,c){var d=a(c);switch(d.prop("tagName").toLowerCase()){case"div":return;case"img":d.wrap(a("<div></div>").css({backgroundImage:'url("'+d.attr("src")+'")',backgroundSize:"cover"})).remove();break;default:d.wrap(a("<div></div>"))}},b.prototype._initEvents=function(){},b.prototype._show=function(){var b=a(this.$contents[this.current]);b.css({zIndex:this.options.zIndex+10}).fadeIn(this.options.transition,a.proxy(this._showComplete,this))},b.prototype._showComplete=function(){var b=a(this.$contents[this.current]);this.$contents.not(b).fadeOut(0),b.css("zIndex",this.options.zIndex)},b.prototype.next=function(){this.current++,this.current>=this.$contents.length&&(this.current=0),this._show()},b.prototype.prev=function(){this.current--,this.current<0&&(this.current=this.$contents.length-1),this._show()},b.DEFAULT={zIndex:1,transition:400},a.zView=function(c,d){return new b(c,a.extend(!0,{},b.DEFAULT,d))},a.fn.zView=function(b){return this.each(function(){var c=a(this),d=c.data("zview"),e=a.extend({},c.data(),"object"==typeof b&&b);d||c.data("zview",d=a.zView(c,e)),"string"==typeof b&&d[b](c)})}}(jQuery);